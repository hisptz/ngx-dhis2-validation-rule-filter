<div class="validation-rule-group-filter-container">
  <div class="validation-rule-group-top-section">
    <div class="validation-rule-group-type-section">
      <mat-form-field style="width: 100%">
        <input
          type="search"
          matInput
          placeholder="Search"
          [(ngModel)]="queryString"
        />
      </mat-form-field>
    </div>
  </div>

  <div class="validation-rule-group-header">
    <div class="validation-rule-group-available-header">
      <span
        matTooltip="Available Validation Rule Group"
        [matTooltipPosition]="'after'"
        class="badge badge-secondary validation-rule-group-badge"
        >{{ (availableValidationRuleGroups | filterByName: queryString).length }} Available</span
      >
      <button
        matTooltip="Select All Validation Rule Group"
        class="btn btn-sm btn-light"
        [disabled]="availableValidationRuleGroups.length === 0"
        (click)="onSelectAllValidationRuleGroup($event)"
      >
        &raquo;
      </button>
    </div>
    <div class="validation-rule-group-selected-header">
      <button
        matTooltip="Unselect All Validation Rule Group"
        class="btn btn-sm btn-light"
        [disabled]="selectedValidationRuleGroups.length === 0"
        (click)="onDeselectAllValidationRuleGroup($event)"
      >
        &laquo;
      </button>
      <span
        matTooltip="Selected Validation Rule Group"
        [matTooltipPosition]="'before'"
        class="badge badge-primary validation-rule-group-badge"
        >{{ selectedValidationRuleGroups.length }} Selected</span
      >
    </div>
  </div>

  <div class="validation-rule-group-body">
    <div class="validation-rule-group-available-body">
      <div
        *ngIf="availableValidationRuleGroups.length === 0 && !(loaded$ | async)"
        style="text-align: center"
      >
        <lib-loading></lib-loading>
      </div>
      <div>
        <ul
          *ngIf="
            (loaded$ | async) && availableValidationRuleGroups.length !== 0
          "
          class="validation-rule-group-list"
        >
          <li
            matTooltip="{{ availableValidationRuleGroup.name }}"
            [matTooltipPosition]="'after'"
            *ngFor="
              let availableValidationRuleGroup of availableValidationRuleGroups | filterByName: queryString
            "
          >
            <a
              (click)="
                onSelectValidationRuleGroup(
                  availableValidationRuleGroup,
                  $event
                )
              "
            >
              {{ availableValidationRuleGroup.name }}
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="validation-rule-group-selected-body">
      <ul class="validation-rule-group-list">
        <ul class="validation-rule-group-list">
          <li
            matTooltip="{{ selectedValidationRuleGroup.name }}"
            [matTooltipPosition]="'before'"
            *ngFor="
              let selectedValidationRuleGroup of selectedValidationRuleGroups
            "
          >
            <a
              (click)="
                onDeselectValidationRuleGroup(
                  selectedValidationRuleGroup,
                  $event
                )
              "
            >
              <span class="badge badge-info">VRG</span>&nbsp;
              {{ selectedValidationRuleGroup.name }}
            </a>
          </li>
        </ul>
      </ul>
    </div>
  </div>

  <div class="validation-rule-group-filter-btns">
    <div>
      <button
        mat-stroked-button
        matTooltip="Close validation rule filter"
        (click)="onClose($event)"
      >
        Close</button
      >&nbsp;
      <button
        mat-stroked-button
        matTooltip="Update selection with the data items"
        (click)="onUpdate($event)"
        [disabled]="selectedValidationRuleGroups.length === 0"
      >
        Update
      </button>
    </div>
  </div>
</div>
